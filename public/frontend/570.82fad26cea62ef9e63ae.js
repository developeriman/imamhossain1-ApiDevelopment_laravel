(self.webpackChunkarrowsoft_project_management=self.webpackChunkarrowsoft_project_management||[]).push([[570],{9451:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProjectsModule:()=>w});var r=n(8583),i=n(3679),a=n(1095),o=n(2458),c=n(3220),s=n(2238),p=n(9983),d=n(7441),g=n(6525),l=n(4655),m=n(1896),u=n(8002),Z=n(6899),f=n(7716),_=n(6767),h=n(354),A=n(7484);function j(e,t){if(1&e){const e=f.EpF();f.ynx(0),f.TgZ(1,"div",2),f.TgZ(2,"button",3),f.NdJ("click",function(){return f.CHM(e),f.oxw().createNewProject()}),f._uU(3," Create New Projects "),f.qZA(),f.qZA(),f.BQk()}}function T(e,t){if(1&e&&(f.ynx(0),f._UZ(1,"app-table",4),f.BQk()),2&e){const e=f.oxw();f.xp6(1),f.Q6J("data",e.PROJECTS)}}let b=(()=>{class e{constructor(e,t,n){this.isAdmin=e,this.projectService=t,this.dialog=n}ngOnInit(){if(this.isAdmin.isAdmin)this.projectService.getAllProjects().pipe((0,u.U)(e=>e.map(e=>this.filter(e)))).subscribe(e=>this.PROJECTS=e);else{const e=JSON.parse(localStorage.getItem("user"));this.projectService.getUserProjects(e.data.id).pipe((0,u.U)(e=>e.map(e=>this.filter(e)))).subscribe(e=>this.PROJECTS=e)}}createNewProject(){this.dialog.open(Z.z)}filter(e){return e.members?{id:e.id,project:e.project_name,"project description":e.project_description,"start date":e.start_date,"target end date":e.target_end_date,members:e.members.map(e=>({id:e.id,name:`${e.first_name} ${e.last_name}`}))}:{id:e.id,project:e.project_name,"project description":e.project_description,"start date":e.start_date,"target end date":e.target_end_date}}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(_.q),f.Y36(h.Y),f.Y36(s.uw))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-projects"]],decls:5,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"controls"],["mat-raised-button","","color","primary",3,"click"],[3,"data"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"h1"),f._uU(2,"Projects"),f.qZA(),f.YNc(3,j,4,0,"ng-container",1),f.YNc(4,T,2,1,"ng-container",1),f.qZA()),2&e&&(f.xp6(3),f.Q6J("ngIf",t.isAdmin.isAdmin),f.xp6(1),f.Q6J("ngIf",t.PROJECTS))},directives:[r.O5,a.lW,A.a],styles:[".controls[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})();var q=n(2820),v=n(5832),P=n(7659);function S(e,t){1&e&&(f.TgZ(0,"p"),f._uU(1,"Not Enough Data!"),f.qZA())}function x(e,t){if(1&e&&(f.ynx(0),f._UZ(1,"app-table",11),f.BQk()),2&e){const e=f.oxw().ngIf,t=f.oxw();f.xp6(1),f.Q6J("data",t.sanitizeData(e.data))}}function O(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"section",12),f.TgZ(1,"h2"),f._uU(2,"Actions"),f.qZA(),f.TgZ(3,"button",13),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2);return t.deleteProject(t.PROJECT_ID)}),f._uU(4," Delete Project "),f.qZA(),f.qZA()}}function U(e,t){if(1&e&&(f.TgZ(0,"div",1),f.TgZ(1,"h1"),f._uU(2),f.ALo(3,"titlecase"),f.qZA(),f.TgZ(4,"section",2),f.TgZ(5,"div",3),f.TgZ(6,"p"),f._uU(7,"Total Hours Worked"),f.qZA(),f.TgZ(8,"h2"),f._uU(9),f.qZA(),f.qZA(),f.TgZ(10,"div",4),f.TgZ(11,"p"),f._uU(12,"Number of People Working"),f.qZA(),f.TgZ(13,"h2"),f._uU(14),f.qZA(),f.qZA(),f.TgZ(15,"div",5),f.TgZ(16,"p"),f._uU(17,"Project Begin Date"),f.qZA(),f.TgZ(18,"h2"),f._uU(19),f.ALo(20,"date"),f.qZA(),f.qZA(),f.TgZ(21,"div",6),f.TgZ(22,"p"),f._uU(23,"Projected Ending Date"),f.qZA(),f.TgZ(24,"h2"),f._uU(25),f.ALo(26,"date"),f.qZA(),f.qZA(),f.TgZ(27,"div",7),f.TgZ(28,"p"),f._uU(29,"Remaining Days"),f.qZA(),f.TgZ(30,"h2"),f._uU(31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(32,"section",8),f.TgZ(33,"h2"),f._uU(34,"Members"),f.qZA(),f.YNc(35,S,2,0,"p",9),f.YNc(36,x,2,1,"ng-container",9),f.qZA(),f.YNc(37,O,5,0,"section",10),f.qZA()),2&e){const e=t.ngIf,n=f.oxw();f.xp6(2),f.Oqu(f.lcZ(3,9,e.project.project_name)),f.xp6(7),f.hij("",n.totalTime(e.data)," Hours"),f.xp6(5),f.Oqu(e.data.length),f.xp6(5),f.Oqu(f.lcZ(20,11,e.project.start_date)),f.xp6(6),f.Oqu(f.lcZ(26,13,e.project.target_end_date)),f.xp6(6),f.hij("",n.remainingDays(e.project.target_end_date)," Days"),f.xp6(4),f.Q6J("ngIf",!e.data.length),f.xp6(1),f.Q6J("ngIf",e.data.length),f.xp6(1),f.Q6J("ngIf",n.isAdmin.isAdmin)}}const y=[{path:"",component:b},{path:":id",component:(()=>{class e{constructor(e,t,n,r,i,a){this.isAdmin=e,this.projectService=t,this.router=n,this.reportService=r,this.snackbarService=i,this.confirmService=a}ngOnInit(){this.PROJECT_ID=Number(sessionStorage.getItem("project_id")),this.REPORT$=this.reportService.getProjectReport(this.PROJECT_ID)}deleteProject(e){this.confirmService.confirm("Are you sure you want to delete this project?").subscribe(t=>{t?this.projectService.deleteProject(e).subscribe(()=>{this.snackbarService.openSnackBar("Project Deleted Successfully!"),sessionStorage.removeItem("projects"),this.router.navigateByUrl("/")},()=>{this.snackbarService.openSnackBar("Error! Please try again later.")}):this.snackbarService.openSnackBar("Project is Unchanged.")})}sanitizeData(e){return e.map(e=>({id:e.id,name:e.first_name+" "+e.last_name,"Total Task":e.total_task,"Total Time":e.total_time}))}remainingDays(e){const t=Date.now();e=new Date(e);const n=Math.ceil((e-t)/864e5);return n<0?0:n}totalTime(e){return e.length?e.map(e=>Number(e.total_time.split(":")[0])).reduce((e,t)=>e+t):0}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(_.q),f.Y36(h.Y),f.Y36(l.F0),f.Y36(q.r),f.Y36(v.o),f.Y36(P.Y))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-specific-task"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"details"],[1,"total-hours-by-all"],[1,"number-of-people-working"],[1,"begin-date"],[1,"projected-ending-date"],[1,"remaining-days"],[1,"members"],[4,"ngIf"],["class","actions",4,"ngIf"],[3,"data"],[1,"actions"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(f.YNc(0,U,38,15,"div",0),f.ALo(1,"async")),2&e&&f.Q6J("ngIf",f.lcZ(1,1,t.REPORT$))},directives:[r.O5,A.a,a.lW],pipes:[r.Ov,r.rS,r.uU],styles:[".details[_ngcontent-%COMP%]{margin:2rem 0;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));grid-gap:1rem;gap:1rem}.details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:1rem;border:1px solid #00081410;border-radius:1rem;display:flex;flex-direction:column;justify-content:center}.members[_ngcontent-%COMP%]{margin:2rem 0}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})(),canActivate:[m.u]}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({providers:[c.FA],imports:[[r.ez,k,a.ot,g.I,s.Is,i.UX,p.c,c.FA,o.XK,d.LD]]}),e})()}}]);