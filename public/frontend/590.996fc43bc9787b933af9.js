(self.webpackChunkarrowsoft_project_management=self.webpackChunkarrowsoft_project_management||[]).push([[590],{3590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PeoplesModule:()=>v});var a=r(8583),s=r(3679),n=r(1095),i=r(2238),o=r(6627),m=r(9983),c=r(6525),l=r(4655),u=r(8002),p=r(7716),d=r(4674),g=r(5832),f=r(8295);function Z(e,t){1&e&&(p.TgZ(0,"mat-hint"),p._uU(1," Minimum 5 Characters. "),p.qZA())}let w=(()=>{class e{constructor(e,t){this.memberService=e,this.snackbarService=t,this.registerForm=new s.cw({first_name:new s.NI("",s.kI.required),last_name:new s.NI("",s.kI.required),username:new s.NI("",s.kI.required),email:new s.NI("",[s.kI.required,s.kI.email]),password:new s.NI("",[s.kI.required,s.kI.min(5)])})}ngOnInit(){}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}register(){const{first_name:e,last_name:t,username:r,email:a,password:s}=this.registerForm.value;e&&t&&r&&this.validateEmail(a)&&s.length>=5?this.memberService.createMember(this.registerForm.value).subscribe(e=>{e.success?(this.snackbarService.openSnackBar("Account Created Successfully!"),sessionStorage.removeItem("users"),this.registerForm.reset()):this.snackbarService.openSnackBar("Unable to Create Account! Please Try Again Later.")},e=>{this.snackbarService.openSnackBar(`\n          ${Object.keys(e.error.errors).map(t=>e.error.errors[t][0]).join(" ")}\n          `)}):this.snackbarService.openSnackBar("Please Make Sure All the Fields are Valid.")}togglePassword(e){e.type="password"===e.type?"text":"password"}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(d.Z),p.Y36(g.o))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-user-modal"]],decls:31,vars:4,consts:[[1,"container"],[3,"formGroup"],["appearance","outline"],["matInput","","type","text","autocomplete","given-name","formControlName","first_name","required",""],["required","","matInput","","type","text","autocomplete","family-name","formControlName","last_name"],["required","","matInput","","type","text","autocomplete","nickname","formControlName","username"],["required","","matInput","","type","email","autocomplete","email","formControlName","email"],["matInput","","type","password","autocomplete","new-password","formControlName","password","required","","minlength","5"],["regPass",""],["matSuffix","","mat-icon-button","","type","button",3,"click"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"form",1),p.TgZ(2,"h2"),p._uU(3,"Create User"),p.qZA(),p.TgZ(4,"mat-form-field",2),p.TgZ(5,"mat-label"),p._uU(6,"First Name"),p.qZA(),p._UZ(7,"input",3),p.qZA(),p.TgZ(8,"mat-form-field",2),p.TgZ(9,"mat-label"),p._uU(10,"Last Name"),p.qZA(),p._UZ(11,"input",4),p.qZA(),p.TgZ(12,"mat-form-field",2),p.TgZ(13,"mat-label"),p._uU(14,"User Name"),p.qZA(),p._UZ(15,"input",5),p.qZA(),p.TgZ(16,"mat-form-field",2),p.TgZ(17,"mat-label"),p._uU(18,"Email"),p.qZA(),p._UZ(19,"input",6),p.qZA(),p.TgZ(20,"mat-form-field",2),p.TgZ(21,"mat-label"),p._uU(22,"New Password"),p.qZA(),p._UZ(23,"input",7,8),p.TgZ(25,"button",9),p.NdJ("click",function(){p.CHM(e);const r=p.MAs(24);return t.togglePassword(r)}),p.TgZ(26,"mat-icon"),p._uU(27),p.qZA(),p.qZA(),p.YNc(28,Z,2,0,"mat-hint",10),p.qZA(),p.TgZ(29,"button",11),p.NdJ("click",function(){return t.register()}),p._uU(30," Register "),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=p.MAs(24);p.xp6(1),p.Q6J("formGroup",t.registerForm),p.xp6(26),p.hij(" ","password"===e.type?"visibility":"visibility_off"," "),p.xp6(1),p.Q6J("ngIf",t.registerForm.value.password&&t.registerForm.value.password.length<5&&t.registerForm.controls.password.touched),p.xp6(1),p.Q6J("disabled",!t.registerForm.valid)}},directives:[s._Y,s.JL,s.sg,f.KE,f.hX,m.Nt,s.Fj,s.JJ,s.u,s.Q7,s.wO,n.lW,f.R9,o.Hw,a.O5,f.bx],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:20vw}.container[_ngcontent-%COMP%]{min-width:40vw}"]}),e})();var b=r(6767),h=r(7484);function _(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",3),p.TgZ(1,"button",4),p.NdJ("click",function(){return p.CHM(e),p.oxw().createUser()}),p._uU(2," Create Member "),p.qZA(),p.qZA()}}function A(e,t){if(1&e&&(p.ynx(0),p._UZ(1,"app-table",5),p.BQk()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("data",e.MEMBERS)}}const q=[{path:"",component:(()=>{class e{constructor(e,t,r){this.ms=e,this.isAdmin=t,this.dialog=r}ngOnInit(){this.ms.getMembers().pipe((0,u.U)(e=>e.map(e=>({id:e.id,name:e.first_name+" "+e.last_name,email:e.email,status:e.status,username:e.username,registered:e.created_at})))).subscribe(e=>{this.MEMBERS=e,this.COLUMNS=Object.keys(e[0])})}createUser(){this.dialog.open(w)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(d.Z),p.Y36(b.q),p.Y36(i.uw))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-peoples"]],decls:5,vars:2,consts:[[1,"container"],["class","controls",4,"ngIf"],[4,"ngIf"],[1,"controls"],["mat-raised-button","","color","primary",3,"click"],[3,"data"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Members"),p.qZA(),p.YNc(3,_,3,0,"div",1),p.YNc(4,A,2,1,"ng-container",2),p.qZA()),2&e&&(p.xp6(3),p.Q6J("ngIf",t.isAdmin.isAdmin),p.xp6(1),p.Q6J("ngIf",t.MEMBERS))},directives:[a.O5,n.lW,h.a],styles:[".controls[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[l.Bz.forChild(q)],l.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[a.ez,k,c.I,n.ot,i.Is,s.UX,m.c,o.Ps]]}),e})()}}]);